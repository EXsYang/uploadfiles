

这里是尚硅谷老韩的数据结构与算法笔记

# 1  数据结构包括线性结构和非线性结构

常见的线性结构包括： 数组，链表，队列，栈

常见的非线性结构包括： 二维数组，多维数组，广义表，树结构，图结构



# 2 Java编码问题解决方案笔记

## 问题1：



在Cursor中运行Java程序，会出现中文乱码问题。

解决方案，可以在要运行的程序中设置编码格式。

~~~java
package com.atguigu.sparsearray;

import java.io.PrintStream;

/**
 * @author yangda
 * @create 2024-11-21-20:47
 * @description:
 *
 * 稀疏数组
 *
 */
public class SparseArray {

    public static void main(String[] args) throws Exception {
        // 设置控制台输出编码为GBK
        // System.setOut(new PrintStream(System.out, true, "GBK")); //在Cursor中使用这个，将Cursor的Terminal（PowerShell）设置为GBK
        
        System.setOut(new PrintStream(System.out, true, "utf-8")); //在idea中使用这个

        int [][] chessArr1 = new int[11][11];

        // 1 表示黑子 2 表示白子
        chessArr1[1][2] = 1;
        chessArr1[2][3] = 2;

        // 输出原始的二维数组
        System.out.println("原始的二维数组这里是中文啊~~");
        for (int[] row : chessArr1) {
            for (int data : row) {
                // System.out.print(data + " ");

                // %d\t 是一个格式化字符串，用于输出整数值。
                //
                // %d 是整数的格式化符号。
                // \t 是一个特殊字符，表示一个制表符（tab）。
                System.out.printf("%d\t",data); // \t 表示制表符();  当你使用 "%d\t" 在 printf 函数中时，它会输出整数值后面跟一个制表符。
            }
            System.out.println();
        }




        // for (int i = 0; i < 11; i++) {
        //     for (int j = 0; j < 11; j++) {
        //         if (chess[i][j] != 0) {
        //             System.out.print("("+i+","+j+")");
        //         }
        //     }
        // }

    }

}

~~~





## 问题2：

我在编码时使用了D:\Java_developer_tools\mycode\DataStructures\DataStructures\src\main\java\com\atguigu\sparsearray>javac -encoding UTF-8
 SparseArray.java
编码成功，没有报错，但是直接使用 javac  SparseArray.java却报错了，为什么？我这里都是在cmd窗口进行的



### 1. CMD编译报错

~~~bash
javac SparseArray.java
# 错误: 编码GBK的不可映射字符
~~~

让我解释一下这个现象：

### 原因解释：

当你使用 javac SparseArray.java 而不指定编码时：

javac 编译器会使用操作系统的默认编码（在中文 Windows 上是 GBK）

而你的源文件是用 UTF-8 编码保存的

所以当 javac 用 GBK 编码去读取 UTF-8 编码的文件时，就会出现不可映射字符的错误

### 具体分析：

~~~bash
# 这个命令成功，因为明确告诉编译器源文件是 UTF-8 编码
javac -encoding UTF-8 SparseArray.java

# 这个命令失败，因为编译器使用系统默认的 GBK 编码去读取 UTF-8 文件
javac SparseArray.java
~~~

### 建议：

始终使用 UTF-8 编码保存源文件

编译时明确指定编码参数

考虑使用构建工具（如 Maven）来管理项目，它会自动处理编码问题

在 IDE 中设置默认编码为 UTF-8

### 补充知识：

Java 源文件编码和运行时编码是两个不同的概念

编译时的编码（-encoding 参数）是告诉编译器如何读取源文件

运行时的编码（-Dfile.encoding 参数）是告诉 JVM 如何处理字符串



### 3. 类运行路径问题

~~~bash
java SparseArray.class
# 错误: 找不到或无法加载主类 SparseArray.class
~~~



## 二、解决方案

### 1. 编译时编码问题

~~~bash
# 正确的编译命令
javac -encoding UTF-8 SparseArray.java

# 设置环境变量
JAVA_TOOL_OPTIONS=-Dfile.encoding=UTF-8

# 创建编译脚本（compile.bat）
@echo off
javac -encoding UTF-8 %*
~~~



---



## 问题3：

### 2. PowerShell(Cursor)运行时中文乱码

~~~bash
ԭʼĶάİ~~ # 原始的二维数组显示乱码
~~~



这是因为Cursor的Terminal（PowerShell）和Windows的CMD使用了不同的默认编码设置。

### 原因解释：

Windows CMD (命令提示符) 默认使用GBK/GB2312编码

PowerShell（Cursor使用的终端）默认使用UTF-16LE编码

你的Java程序输出使用的是GBK编码



### 2. 运行时终端编码问题

解决方案：

#### 在PowerShell中设置编码（临时解决）：

~~~bash
# 临时解决
[Console]::OutputEncoding = [System.Text.Encoding]::GetEncoding("GBK")

# 永久解决（在PowerShell配置文件中添加）
notepad $PROFILE
[Console]::OutputEncoding = [System.Text.Encoding]::GetEncoding("GBK")
~~~



#### Java代码设置

~~~
// 在Java代码中设置输出编码
System.setOut(new PrintStream(System.out, true, "GBK"));
~~~



### 3. 类运行路径问题

~~~bash
# 方式1：在classes目录下运行
cd target/classes
java com.atguigu.sparsearray.SparseArray

# 方式2：指定classpath运行
java -cp target/classes com.atguigu.sparsearray.SparseArray
~~~

## 三、最佳实践建议

### 1. 项目编码规范

源文件统一使用UTF-8编码保存

IDE设置默认编码为UTF-8

使用Maven等构建工具管理项目

### 2. 编译运行规范

编译时始终指定编码参数

运行时注意包路径

正确设置classpath

### 3. 开发环境配置

统一使用UTF-8编码

考虑使用Windows Terminal

IDE中配置文件编码为UTF-8

## 四、相关知识点

### 1. 编码概念

源文件编码

编译时编码

运行时编码

### 2. Windows终端特点

**CMD：默认GBK编码**

**PowerShell：默认UTF-16LE编码**

### 3. Java编码参数

-encoding：编译时源文件编码

-Dfile.encoding：运行时字符编码

## 五、注意事项

不同终端可能需要不同的编码设置

\2. 编译和运行时的编码是两个独立的概念

项目中应保持编码的一致性

建议使用构建工具来自动化管理这些问题

## 六、常用命令速查

~~~bash
# 编译命令
javac -encoding UTF-8 SparseArray.java

# 运行命令
java -cp target/classes com.atguigu.sparsearray.SparseArray

# PowerShell编码设置
[Console]::OutputEncoding = [System.Text.Encoding]::GetEncoding("GBK")
~~~







## 问题4：

为什么需要将Terminal（PowerShell）的编码改为GBK就可以正常显示了呢？而idea则需要使用utf-8打印才会正常，如果使用GBK,idea控制台会输出乱码。

### 1. PowerShell 和 IDEA 的区别

#### PowerShell:

PowerShell 默认使用 UTF-16LE 编码

Windows 系统的中文版本默认使用 GBK 编码

当我们将 PowerShell 设置为 GBK 时，它能正确解析来自 Java 程序的 GBK 编码输出

~~~bash
# PowerShell 设置 GBK 编码
[Console]::OutputEncoding = [System.Text.Encoding]::GetEncoding("GBK")
~~~



#### IDEA:

IDEA 默认使用 UTF-8 编码

IDEA 的控制台是模拟终端，完全由 IDEA 控制

IDEA 的整个环境（包括项目文件、控制台等）都统一使用 UTF-8

~~~bash
// IDEA 中正确的控制台输出设置
System.setOut(new PrintStream(System.out, true, "UTF-8"));
~~~





### 2. 为什么会这样？

#### 编码链条分析：

Java程序 -> 输出流编码 -> 终端解码 -> 显示

PowerShell 情况：

Java(GBK) -> GBK输出 -> PowerShell(GBK解码) -> 正确显示

IDEA 情况：

Java(UTF-8) -> UTF-8输出 -> IDEA(UTF-8解码) -> 正确显示

### 3. 最佳实践建议

开发环境（IDEA）：

~~~bash
// 使用 UTF-8
System.setOut(new PrintStream(System.out, true, "UTF-8"));
~~~





生产环境：

~~~bash
// 根据运行环境动态设置

String encoding = System.getProperty("file.encoding", "UTF-8");

System.setOut(new PrintStream(System.out, true, encoding));
~~~



通用解决方案：

~~~java
public class ConsoleUtils {

  public static void initConsole() {

​    try {

​      *// 检测是否在 IDE 环境*

​      boolean isIDE = System.getProperty("java.class.path").contains("idea_rt.jar");

​      

​      *// 根据环境选择编码*

​      String encoding = isIDE ? "UTF-8" : "GBK";

​      System.setOut(new PrintStream(System.out, true, encoding));

​    } catch (Exception *e*) {

​      e.printStackTrace();

​    }

  }

}
~~~



### 4. 原因总结

历史原因：

Windows 中文版历史上使用 GBK

Java 早期在中文 Windows 上默认使用 GBK

现代开发工具普遍采用 UTF-8

环境差异：

PowerShell 是 Windows 系统组件，遵循系统默认编码

IDEA 是独立开发环境，采用开发领域标准的 UTF-8

\3. 最佳实践：

开发时统一使用 UTF-8

部署时考虑运行环境的编码特点

必要时进行编码自适应处理

这就是为什么同样的程序在不同环境需要不同编码设置的原因。理解这一点有助于我们更好地处理跨平台和多环境的编码问题。







# 3

